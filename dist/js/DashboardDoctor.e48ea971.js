(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DashboardDoctor"],{"17b3":function(t,e,a){},"891e":function(t,e,a){"use strict";var s=a("2909"),i=a("5530"),r=(a("a9e3"),a("99af"),a("d3b7"),a("25f0"),a("d81d"),a("17b3"),a("9d26")),n=a("dc22"),o=a("a9ad"),l=a("de2c"),c=a("7560"),u=a("58df");e["a"]=Object(u["a"])(o["a"],Object(l["a"])({onVisible:["init"]}),c["a"]).extend({name:"v-pagination",directives:{Resize:n["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return Object(i["a"])({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var a=e%2===0?1:0,i=Math.floor(e/2),r=this.length-i+1+a;if(this.value>i&&this.value<r){var n=1,o=this.length,l=this.value-i+2,c=this.value+i-2-a,u=l-1===n+1?2:"...",d=c+1===o-1?c+1:"...";return[1,u].concat(Object(s["a"])(this.range(l,c)),[d,this.length])}if(this.value===i){var h=this.value+i-1-a;return[].concat(Object(s["a"])(this.range(1,h)),["...",this.length])}if(this.value===r){var m=this.value-i+1;return[1,"..."].concat(Object(s["a"])(this.range(m,this.length)))}return[].concat(Object(s["a"])(this.range(1,i)),["..."],Object(s["a"])(this.range(r,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var a=[];t=t>0?t:1;for(var s=t;s<=e;s++)a.push(s);return a},genIcon:function(t,e,a,s,i){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":a},attrs:{disabled:a,type:"button","aria-label":i},on:a?{}:{click:s}},[t(r["a"],[e])])])},genItem:function(t,e){var a=this,s=e===this.value&&(this.color||"primary"),i=e===this.value,r=i?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(s,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":i,"aria-label":this.$vuetify.lang.t(r,e)},on:{click:function(){return a.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map((function(a,s){return t("li",{key:s},[isNaN(Number(a))?t("span",{class:"v-pagination__more"},[a.toString()]):e.genItem(t,a)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},"90ac":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dashboard-title"),a("dashboard-box",[a("template",{slot:"content"},[a("v-tabs",{staticClass:"mt-2",attrs:{"background-color":"transparent",color:"accent"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"accent"}}),a("v-tab",{staticClass:"no-bg",attrs:{ripple:!1}},[t._v("رزروهای پیش رو")]),a("v-tab",{staticClass:"no-bg",attrs:{ripple:!1}},[t._v("تاریخچه رزروها")]),a("v-tab",{staticClass:"no-bg",attrs:{ripple:!1}},[t._v("افزودن نوبت")])],1),a("v-divider",{staticClass:"border"}),a("v-tabs-items",{attrs:{touchless:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"pa-0"},[a("dashboard-table",{attrs:{data:t.futureVisits,name:"upcomings"}},[a("template",{slot:"rows"},[t.futureVisits.rows.length>0?t._l(t.futureVisits.rows,(function(e,s){return a("tr",{key:"tr-upcomings-"+s},t._l(t.futureVisits.cols,(function(s,i){return a("td",{key:"td-upcomings-"+i,staticClass:"rounded-t-0"},[["name"].includes(s.key)?[a("div",{staticStyle:{"min-width":"200px"}},["-"!=e[s.key]?a("v-avatar",{attrs:{color:t.colors[Math.floor(Math.random()*t.colors.length)],size:"36"}},[a("span",{staticClass:"white--text text-body-2",staticStyle:{"letter-spacing":"2px"}},[t._v(t._s(e[s.key][0]))])]):a("v-icon",{attrs:{color:"success"}},[t._v("event_available")]),t._v(" "+t._s("-"!=e[s.key]?e[s.key]:"رزرو نشده")+" ")],1)]:["actions"].includes(s.key)?[a("div",{staticClass:"text-left",staticStyle:{"min-width":"90px"}},[a("v-btn",{attrs:{to:{name:"VisitDetailDoctor",params:{id:e.id}},icon:"",small:""}},[a("v-icon",{attrs:{small:""}},[t._v("visibility")])],1)],1)]:[a("div",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(e[s.key])+" ")])]],2)})),0)})):[a("tr",[a("td",{attrs:{colspan:"5"}},[t._v("رکوردی یافت نشد.")])])]],2)],2),t.futureVisits.rows.length>0&&t.total_f>10?a("v-pagination",{staticClass:"my-8",attrs:{length:t.total_f%10==0?Math.floor(t.total_f/10):Math.floor(t.total_f/10)+1,"total-visible":5,circle:"",color:"accent"},model:{value:t.page_f,callback:function(e){t.page_f=e},expression:"page_f"}}):t._e()],1)],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"pa-0"},[a("dashboard-table",{attrs:{data:t.historyVisits,name:"history"}},[a("template",{slot:"rows"},[t.historyVisits.rows.length>0?t._l(t.historyVisits.rows,(function(e,s){return a("tr",{key:"tr-history-"+s},t._l(t.historyVisits.cols,(function(s,i){return a("td",{key:"td-history-"+i,staticClass:"rounded-t-0"},[["name"].includes(s.key)?[a("div",{staticStyle:{"min-width":"200px"}},["-"!=e[s.key]?a("v-avatar",{attrs:{color:t.colors[Math.floor(Math.random()*t.colors.length)],size:"36"}},[a("span",{staticClass:"white--text text-body-2",staticStyle:{"letter-spacing":"2px"}},[t._v(t._s(e[s.key][0]))])]):a("v-icon",{attrs:{color:"success"}},[t._v("event_available")]),t._v(" "+t._s("-"!=e[s.key]?e[s.key]:"رزرو نشده")+" ")],1)]:["actions"].includes(s.key)?[a("div",{staticClass:"text-left",staticStyle:{"min-width":"90px"}},[a("v-btn",{attrs:{to:{name:"VisitDetailDoctor",params:{id:e.id}},icon:"",small:""}},[a("v-icon",{attrs:{small:""}},[t._v("visibility")])],1)],1)]:[a("div",{staticStyle:{"min-width":"150px"}},[t._v(" "+t._s(e[s.key])+" ")])]],2)})),0)})):[a("tr",[a("td",{attrs:{colspan:"5"}},[t._v("رکوردی یافت نشد.")])])]],2)],2),t.historyVisits.rows.length>0&&t.total_h>10?a("v-pagination",{staticClass:"my-8",attrs:{length:t.total_h%10==0?Math.floor(t.total_h/10):Math.floor(t.total_h/10)+1,"total-visible":5,circle:"",color:"accent"},model:{value:t.page_h,callback:function(e){t.page_h=e},expression:"page_h"}}):t._e()],1)],1)],1),a("v-tab-item",[a("v-row",{attrs:{justify:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"12",lg:"8",md:"9",sm:"10",xl:"6"}},[a("v-row",{staticClass:"my-6 mx-4",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pl-sm-2",attrs:{cols:"12",sm:"6"}},[a("v-text-field",{staticClass:"mb-4",attrs:{"error-messages":t.errors.date?t.errors.date[0]:"",filled:t.$env.btn.filled,"hide-details":!t.errors.date,outlined:t.$env.btn.outlined,solo:t.$env.btn.solo,value:null!=t.form.date?t.$moment(new Date(t.form.date)).format("jYYYY/jMM/jDD"):"",dir:"rtl",label:"تاریخ",placeholder:"",readonly:""},on:{click:function(e){t.showDatePicker=!0}}})],1),a("v-col",{staticClass:"pr-sm-2",attrs:{cols:"12",sm:"6"}},[a("v-text-field",{staticClass:"mb-4",attrs:{"error-messages":t.errors.count?t.errors.count[0]:"",filled:t.$env.btn.filled,"hide-details":!t.errors.count,outlined:t.$env.btn.outlined,solo:t.$env.btn.solo,dir:"rtl",label:"تعداد",placeholder:"",type:"number"},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}})],1),a("v-col",{staticClass:"pl-sm-2",attrs:{cols:"12",sm:"6"}},[a("v-text-field",{staticClass:"mb-4",attrs:{"error-messages":t.errors.startdate?t.errors.startdate[0]:"",filled:t.$env.btn.filled,"hide-details":!t.errors.startdate,outlined:t.$env.btn.outlined,solo:t.$env.btn.solo,value:null!=t.form.start?t.$moment(new Date(t.form.start)).format("HH:mm"):"",dir:"rtl",label:"زمان شروع",placeholder:"",readonly:""},on:{click:function(e){t.showStartTimePicker=!0}}})],1),a("v-col",{staticClass:"pr-sm-2",attrs:{cols:"12",sm:"6"}},[a("v-text-field",{staticClass:"mb-4",attrs:{"error-messages":t.errors.enddate?t.errors.enddate[0]:"",filled:t.$env.btn.filled,"hide-details":!t.errors.enddate,outlined:t.$env.btn.outlined,solo:t.$env.btn.solo,value:null!=t.form.end?t.$moment(new Date(t.form.end)).format("HH:mm"):"",dir:"rtl",label:"زمان پایان",placeholder:"",readonly:""},on:{click:function(e){t.showEndTimePicker=!0}}})],1),a("v-btn",{attrs:{color:"accent",elevation:"0",large:""},on:{click:t.submit}},[t._v("ثبت ")])],1)],1)],1)],1)],1),a("viradate-picker",{attrs:{"auto-submit":!0,inline:!1,min:t.$moment().locale("en").format("YYYY-MM-DD"),range:!1,show:t.showDatePicker,element:"dateone",format:"YYYY-MM-DD",type:"date"},on:{close:function(e){t.showDatePicker=!1}},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),a("viradate-picker",{attrs:{inline:!1,show:t.showStartTimePicker,element:"timepone",format:"YYYY-MM-DD HH:mm","input-format":"YYYY-MM-DD HH:mm",type:"time"},on:{close:function(e){t.showStartTimePicker=!1}},model:{value:t.form.start,callback:function(e){t.$set(t.form,"start",e)},expression:"form.start"}}),a("viradate-picker",{attrs:{inline:!1,show:t.showEndTimePicker,element:"timetwo",format:"YYYY-MM-DD HH:mm","input-format":"YYYY-MM-DD HH:mm",type:"time"},on:{close:function(e){t.showEndTimePicker=!1}},model:{value:t.form.end,callback:function(e){t.$set(t.form,"end",e)},expression:"form.end"}})],1)],2)],1)},i=[],r=a("5530"),n=(a("d3b7"),a("159b"),a("99af"),a("caad"),a("83cd")),o=a("a190"),l=a("5da1"),c={name:"Dashboard",components:{DashboardTable:l["a"],DashboardBox:o["a"],DashboardTitle:n["a"]},data:function(){return{tab:0,colors:["red","pink darken-1","purple darken-1","deep-purple","indigo","blue accent-4","teal accent-4","green","light-green darken-1","amber darken-3","orange accent-4","deep-orange","brown","blue-grey"],page_h:1,page_f:1,total_h:!1,total_f:!1,errors:!1,showDatePicker:!1,showStartTimePicker:!1,showEndTimePicker:!1,form:{date:null,start:null,end:null,count:null},futureVisits:{cols:[{title:"نام بیمار",key:"name"},{title:"تاریخ شروع",key:"start"},{title:"تاریخ پایان",key:"end"},{title:"وضعیت",key:"status"},{title:"",key:"actions"}],rows:[]},historyVisits:{cols:[{title:"نام بیمار",key:"name"},{title:"تاریخ شروع",key:"start"},{title:"تاریخ پایان",key:"end"},{title:"وضعیت",key:"status"},{title:"",key:"actions"}],rows:[]}}},computed:{},methods:{getHistoryVisits:function(){var t=this;this.historyVisits.rows=[],this.$store.getters.api({method:"get",url:"api/v1/dashboard/doctor/doctorvisitshistory/?limit=10&offset=".concat(1==this.page_h?0:10*(this.page_h-1)),data:!1,loader:!0}).then((function(e){null!=e.data.results&&e.data.results.length>0&&(t.total_h=e.data.count,e.data.results.forEach((function(e){t.historyVisits.rows.push({id:e.id,name:null!=e.patient_first_name?"".concat(e.patient_first_name," ").concat(e.patient_last_name):"-",start:t.$moment(new Date(e.start_date)).format("jYYYY/jMM/jDD ساعت HH:mm"),end:t.$moment(new Date(e.end_date)).format("jYYYY/jMM/jDD ساعت HH:mm"),status:e.is_passed?"گذشته":"آینده"})})))}))},getFutureVisits:function(){var t=this;this.futureVisits.rows=[],this.$store.getters.api({method:"get",url:"api/v1/dashboard/doctor/doctoraheadvisits/?limit=10&offset=".concat(1==this.page_f?0:10*(this.page_f-1)),data:!1,loader:!0}).then((function(e){null!=e.data.results&&e.data.results.length>0&&(t.total_f=e.data.count,e.data.results.forEach((function(e){t.futureVisits.rows.push({id:e.id,name:null!=e.patient_first_name?"".concat(e.patient_first_name," ").concat(e.patient_last_name):"-",start:t.$moment(new Date(e.start_date)).format("jYYYY/jMM/jDD ساعت HH:mm"),end:t.$moment(new Date(e.end_date)).format("jYYYY/jMM/jDD ساعت HH:mm"),status:e.is_passed?"گذشته":"آینده"})})))}))},submit:function(){var t=this;if(this.errors=!1,[null,""].includes(this.form.date)||[null,""].includes(this.form.start)||[null,""].includes(this.form.end)||[null,""].includes(this.form.count))return[null,""].includes(this.form.date)&&(this.errors=Object(r["a"])(Object(r["a"])({},this.errors),{date:["انتخاب تاریخ الزامی است."]})),[null,""].includes(this.form.start)&&(this.errors=Object(r["a"])(Object(r["a"])({},this.errors),{startdate:["انتخاب زمان شروع الزامی است."]})),[null,""].includes(this.form.end)&&(this.errors=Object(r["a"])(Object(r["a"])({},this.errors),{enddate:["انتخاب زمان پایان الزامی است."]})),[null,""].includes(this.form.count)&&(this.errors=Object(r["a"])(Object(r["a"])({},this.errors),{count:["انتخاب تعداد الزامی است."]})),!1;var e=this.$moment(new Date("".concat(this.form.date," ").concat(this.$moment(new Date(this.form.start)).format("HH:mm")))).locale("en").format(),a=this.$moment(new Date("".concat(this.form.date," ").concat(this.$moment(new Date(this.form.end)).format("HH:mm")))).locale("en").format();this.$store.getters.api({method:"post",url:"api/v1/dashboard/doctor/addreservetime/",data:{start_date:e,end_date:a,count:this.form.count},loader:!0}).then((function(e){t.$store.commit("setSnackbar",{show:t.$moment().unix(),time:2e3,message:e.data.message,color:"success"}),t.getHistoryVisits(),t.getFutureVisits(),t.form={date:null,start:null,end:null,count:null}})).catch((function(e){401==e.response.status&&(t.$store.commit("setSnackbar",{show:t.$moment().unix(),time:2e3,message:"توکن نامعتبر یا منقضی شده است",color:"error"}),t.$router.push({name:"AuthDoctor"}))}))}},created:function(){this.$route.query.page_h&&(this.page_h=parseInt(this.$route.query.page_h)),this.$route.query.page_f&&(this.page_f=parseInt(this.$route.query.page_f)),this.getHistoryVisits(),this.getFutureVisits()},watch:{page_h:function(){this.$router.push({name:"DashboardDoctor",query:{page_h:this.page_h,page_f:this.page_f}}),this.getHistoryVisits()},page_f:function(){this.$router.push({name:"DashboardDoctor",query:{page_f:this.page_f,page_h:this.page_h}}),this.getFutureVisits()}}},u=c,d=a("2877"),h=a("6544"),m=a.n(h),f=a("8212"),p=a("8336"),v=a("b0af"),b=a("99d9"),g=a("62ad"),_=a("ce7e"),y=a("132d"),k=a("891e"),w=a("0fd9"),$=a("71a3"),D=a("c671"),x=a("fe57"),V=a("aac8"),Y=a("9a96"),M=a("8654"),j=Object(d["a"])(u,s,i,!1,null,"0a133a4f",null);e["default"]=j.exports;m()(j,{VAvatar:f["a"],VBtn:p["a"],VCard:v["a"],VCardText:b["c"],VCol:g["a"],VDivider:_["a"],VIcon:y["a"],VPagination:k["a"],VRow:w["a"],VTab:$["a"],VTabItem:D["a"],VTabs:x["a"],VTabsItems:V["a"],VTabsSlider:Y["a"],VTextField:M["a"]})}}]);
//# sourceMappingURL=DashboardDoctor.e48ea971.js.map